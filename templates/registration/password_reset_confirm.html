{% extends 'masters.html' %}
{% block body %}
<section id="form" style="margin-left: 30%;"><!--form-->
	<div class="container">
		<div class="row">
			<div class="col-sm-4 col-sm-offset-1">
				<div class="signup-form"><!--Signup form-->
					<h2>New Password</h2>
                    {% if validlink %}

					<!-- Show non-field errors (e.g., incorrect credentials) -->
					{% if form.non_field_errors %}
						<div class="alert alert-danger">
							{% for error in form.non_field_errors %}
								<p>{{ error }}</p>
							{% endfor %}
						</div>
					{% endif %}

					<form method="post">
						{% csrf_token %}
						{% for field in form %}
							<div class="form-group">
								<label>{{ field.label_tag }}</label>
								<p>{{ field }}</p>
								<!-- Show field-specific errors -->
								{% if field.errors %}
									<div class="alert alert-danger">
										{% for error in field.errors %}
											<p>{{ error }}</p>
										{% endfor %}
									</div>
								{% endif %}
							</div>
						{% endfor %}
                        <button class="btn btn-default" type="submit">Login</button>
					</form>
                <p style="color: red">Invalid Token</p>
                <p>
                    <a href="{% url 'password_reset' %}">
                        Request a new password request token
                    </a>
                </p>
                {% endif %}
				</div>
			</div>
		</div>
	</div>
</section>
{% endblock %}
